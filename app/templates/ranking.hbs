{{#app-page
  title="Rank list"
  contentReady=ranking.ready
}}
  {{#if workplace.active}}
    {{#app-page-card
      class="rank-list"
      refreshAction="refreshRankList"
      rankList=true
      info="Ranking of OTIUM's staff members. Arhitmetic mean/quantity of grades."
      refresh=refreshRealtimeList
    }}

      {{#if ranking.workers}}
        {{#each ranking.workers as |user index|}}
          <div class="ranking-user layout-row layout-align-start-center">
            <div class="image">
              {{#if user.profile_image}}
                <img src="{{user.profile_image}}" alt="">
              {{else}}
                {{paper-icon "account-circle"}}
              {{/if}}
            </div>

            <div>
              <div class="name">
                {{user.first_name}} {{user.last_name}}
              </div>
              <div class="job-title">
                {{user.job_title}}
              </div>
            </div>

            <span class="flex"></span>
            <div class="grade">
              <span class="value">{{user.grades.average}}</span> / <span>{{user.grades.total}}</span>
            </div>
          </div>
        {{/each}}

      {{else}}
        <div class="rich-info">
          {{paper-icon "equalizer"}}
          <p>There are no graded users so far</p>
        </div>
      {{/if}}

      {{#if (or user.accountType.business workplace.data.manager)}}
        {{#if ranking.managers}}
          <div class="managers-label">Managers</div>

          {{#each ranking.managers as |user index|}}
            <div class="ranking-user layout-row layout-align-start-center">
              <div class="image">
                {{#if user.profile_image}}
                  <img src="{{user.profile_image}}" alt="">
                {{else}}
                  {{paper-icon "account-circle"}}
                {{/if}}
              </div>

              <div>
                <div class="name">
                  {{user.first_name}} {{user.last_name}}
                </div>
                <div class="job-title">
                  {{user.job_title}}
                </div>
              </div>

              <span class="flex"></span>
              <div class="grade">
                <span class="value">{{user.grades.average}}</span> / <span>{{user.grades.total}}</span>
              </div>
            </div>
          {{/each}}
        {{/if}}
      {{/if}}

    {{/app-page-card}}

  {{else}}
    {{#app-page-card
      header=false
    }}
      <div class="rich-info">
        {{paper-icon "people"}}
        <p>No workplace</p>
      </div>
    {{/app-page-card}}
  {{/if}}
{{/app-page}}
