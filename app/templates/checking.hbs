{{#app-page title="Check In/Out"}}
  {{#app-page-card
    title="Status"
    resizeable=true
    info="This is your current check in status..."
  }}
    {{#if checkedIn}}
      <div class="checkin-status-box">
        <div class="header layout-row layout-align-start-center">
          <div class="title">Checked In</div>
          <span class="flex"></span>
          <div class="status-icon">
            {{paper-icon "alarm-on"}}
          </div>
        </div>
        <div class="meta-box">
          <div class="from-now">{{moment-from-now checkedIn}}</div>
          <div class="full-time">{{moment-format checkedIn "dddd, MMMM Do, h:mm a"}}</div>
        </div>
      </div>

      {{#unless confirmCheckOut}}        
        <div class="filled-btn center" {{action "openConfirmCheckOut"}}>Check Out</div>
      {{/unless}}

      {{#if confirmCheckOut}}
        <div class="inline-form">
          <div class="form">
            <p class="info">Please confir that you want to check out right now.</p>

            <div class="preloader {{if checkout_preloader 'visible' 'hidden'}}">
              {{paper-progress-linear}}
            </div>

            <div class="outline-btn" {{action "cancelCheckOut"}}>Cancel</div>
            <div class="filled-btn" {{action "checkOut"}}>Check Out Now</div>
          </div>
        </div>
      {{/if}}

    {{else}}
      <div class="checkin-status-box out">
        <div class="header layout-row layout-align-start-center">
          <div class="title">Checked Out</div>
          <span class="flex"></span>
          <div class="status-icon">
            {{paper-icon "alarm-off"}}
          </div>
        </div>

        {{#if checkedOut_value}}
          <div class="meta-box">
            <div class="from-now">{{moment-from-now checkedOut_value}}</div>
            <div class="full-time">{{moment-format checkedOut_value "dddd, MMMM Do, h:mm a"}}</div>
          </div>
        {{/if}}
      </div>

      {{#unless checkInEdit}}
        <div class="filled-btn center" {{action "checkInEdit"}}>Check In</div>
      {{/unless}}

      {{#if checkInEdit}}
        {{#paper-form onSubmit=(action "checkIn") as |form|}}
          <div class="inline-form">
            <div class="form">
              <p class="info">Specify in how hours you want to be automatically checked out</p>

              {{paper-input
                label="Check Out After (hours)"
                type="number"
                value=checkOutHours
                onChange=(action (mut checkOutHours))
                required=true
              }}

              <div class="checkout-time">
                <div class="info">Check Out at: <span>{{checkOutTime}}</span></div>
              </div>

              {{#if error_msg}}
                <div class="message-box error">
                  {{paper-icon "error"}}
                  <div class="message">{{error_msg}}</div>
                </div>
              {{/if}}

              <div class="preloader {{if preloader 'visible' 'hidden'}}">
                {{paper-progress-linear}}
              </div>

              <div class="outline-btn" {{action "checkInEditCancel"}}>Cancel</div>
              <div class="filled-btn" {{action form.onSubmit}}>Check In</div>
            </div>
          </div>
        {{/paper-form}}
      {{/if}}

    {{/if}}
  {{/app-page-card}}

  {{#app-page-card
    title="History"
    resizeable=true
    info="This is history of check ins..."
  }}
    {{#if history.length}}
    <div class="checkin-history-list">
      {{#each history as |check|}}
        {{checkin-history-item check=check}}
      {{/each}}
    </div>

    {{else}}
      <div class="info-message">No history available</div>
    {{/if}}
  {{/app-page-card}}
{{/app-page}}
